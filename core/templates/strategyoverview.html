{% extends 'base.html' %}

{% block title %}
    Strategiyalar Quiz
{% endblock %}

{% block content %}
    <h2 class="text-2xl font-semibold mb-6 text-blue-700">üìñ Strategiyalar bo‚Äòyicha test</h2>
    <p class="text-gray-700 mb-4">Quyida berilgan test savollarini yeching. "Next" tugmasini bosib keyingi savolga o‚Äòtasiz.</p>

    <div id="quiz-container" class="bg-white shadow-lg rounded-lg p-6">
        <!-- Savol chiqadigan joy -->
        <h3 id="question" class="text-xl font-bold mb-4 text-gray-900"></h3>

        <!-- Javob variantlari -->
        <div id="options" class="space-y-3"></div>

        <!-- Tugmalar -->
        <div class="mt-6 flex justify-between">
            <button id="nextBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-500 transition">Next ‚û°Ô∏è</button>
        </div>
    </div>

    <!-- Natija chiqadigan joy -->
    <div id="result-container" class="hidden mt-8 p-6 bg-green-100 text-green-800 rounded-lg shadow">
        <h3 class="text-2xl font-bold">‚úÖ Test tugadi!</h3>
        <p id="score" class="mt-4 text-lg"></p>
    </div>

    <script>
        // Savollar ro‚Äòyxati
        const questions = [
            { question: "SMC strategiyasi nimani anglatadi?", options: ["Smart Money Concept", "Simple Market Control", "Safe Market Code"], correct: 0 },
            { question: "ICT strategiyasi qaysi so‚Äòzlarning qisqartmasi?", options: ["Inner Circle Trader", "Instant Crypto Trading", "Intelligent Currency Tactic"], correct: 0 },
            { question: "Risk darajasi yuqori strategiya qaysi?", options: ["SMC", "ICT", "Ikkalasi ham xavfsiz"], correct: 1 },
            { question: "Savdo jurnalining maqsadi nima?", options: ["Savdolarni qayd qilish", "Xizmat ko‚Äòrsatish", "Grafik chizish"], correct: 0 },
            { question: "Win Rate 70% bo‚Äòlsa, bu nimani anglatadi?", options: ["10 ta savdoning 7 tasi yutadi", "10 ta savdoning 3 tasi yutadi", "Barchasi yutadi"], correct: 0 }
        ];

        let currentQuestion = 0;
        let score = 0;

        const questionEl = document.getElementById("question");
        const optionsEl = document.getElementById("options");
        const nextBtn = document.getElementById("nextBtn");
        const resultContainer = document.getElementById("result-container");
        const scoreEl = document.getElementById("score");

        function loadQuestion() {
            let q = questions[currentQuestion];
            questionEl.textContent = (currentQuestion + 1) + ". " + q.question;

            optionsEl.innerHTML = "";
            q.options.forEach((option, index) => {
                let btn = document.createElement("button");
                btn.textContent = option;
                btn.className = "block w-full text-left px-4 py-2 border rounded-lg hover:bg-blue-100";
                btn.onclick = () => checkAnswer(index);
                optionsEl.appendChild(btn);
            });
        }

        function checkAnswer(selected) {
            if (selected === questions[currentQuestion].correct) {
                score++;
            }
            nextQuestion();
        }

        function nextQuestion() {
            currentQuestion++;
            if (currentQuestion < questions.length) {
                loadQuestion();
            } else {
                showResult();
            }
        }

        function showResult() {
            document.getElementById("quiz-container").classList.add("hidden");
            resultContainer.classList.remove("hidden");
            scoreEl.textContent = `Siz ${questions.length} ta savoldan ${score} tasiga to‚Äòg‚Äòri javob berdingiz. üéâ`;
        }

        nextBtn.addEventListener("click", nextQuestion);

        // Boshlash
        loadQuestion();
    </script>
{% endblock %}
